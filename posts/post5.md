优化内容分享
托管内存的优化，c#自身的垃圾回收机制，需要注意的点，1.零碎内存，2大内存 85k+
尽量不要分配大块内存。天宠岛项目大内存引发问题，需要传值的地方使用结构体。  注意反射的使用，反射会带来很多的内存消耗（需要确认消耗来源（TODO））-第七契约项目，尽量使用代码生成（这个可以大量使用 ulua 方案） 注意第三方语言的引用 -传世天神项目，lua

非托管内存的优化，这个是重点，先介绍下工具，profiler 已经够用，可以看到在内存中有几份（这个主要是使用assetbundle的时候导致的重复加载（TODO）），assetbundle本身的管理，非托管内存的类型，图片（重点mipmap带来的内存消耗，烘培贴图的的内存消耗（TODO），UI资源，common的划分，引用关系的处理，特效的图片，使用硬件加速格式，保证2的整数次幂，pvrtc etc（alpha分离）pc格式（TODO）） 动画（注意不要使用动画来做延时）网格（这个不大）声音（使用压缩格式（TODO）） 其他内容（TODO）
监测工具，之前用mac自带的工具即可，unity自身的工具也行（TODO）
内存优化思路比较清晰，按部就班进行即可 unity文档中提到的内容（TODO）重要的是稳定，而不是大小

cpu的优化 逻辑上的cpu密集操作（很少） 超大背包（上千个对象，十几二十种属性）的排序（快排即可），客户端可能没有更多需求，使用红黑树（插入时排序）GC优化（对象池） DrawCall的优化（模型合并，static的使用，UI界面层级的管理（这个不重要），思路（能合并的就合并，比如阴影（只是一个举例） 少使用pass） 使用延迟渲染（TODO）） 蒙皮操作（重点，pc 的性能可能支持得住，但是也有项目用gpu蒙皮，注意骨骼节点的数量，尽量不要用骨骼来做披风，飘动的对象，用物理对象处理， 蒙皮操作的原理讲解， 禁用蒙皮，使用静态状态，甚至序列帧（官方也在使用）节点融合，自己实现也可以，不过比较麻烦）  看一下profiler中的情况  动画本身消耗不大 unity文档中提到的cpu 的优化内容（TOOD）

gpu的优化 重点优化内容 quality setting的内容， 阴影的优化（阴影的实现，效果区别，建议使用第三方插件）， mipmap 等级， 渲染管线的流程（每个流程涉及的优化）， 视锥裁剪， 使用不透明对象裁剪（TODO） 遮挡剔除， 使用LOD， 小物件的分批显示（视锥裁剪）， 后处理的使用（尽量少用，如果要用，尽量一次做完（TODO）（高斯模糊消耗不大，景深 ssao消耗比较大）），特效（重点）因为都是半透明的对象，要求美术使用网格（大的，或者常用对象，使用alphaTest（TODO）），特效分级显示，少使用additive，控制屏幕内最多特效数量，强制分级，光照优化（延迟渲染TODO），单光源使用前向渲染，大量光源使用延迟渲染（TODO）尽量使用烘培，使用光照探针 probe， 反射高光sss材质（主角）工具推荐 shader forge，要求美术画光影，控制烘培贴图的大小，动态分级（TODO），草地 树木等（简单提到剑网三，倩女幽魂） 屏幕空间反射（崩坏三 TODO）

IO即包体大小优化 动态更新，控制粒度，

帧数控制和帧数说明，cpu和gpu的同步机制

看一下unite 2017的文档记录，看untiy的官方文档 自己的网站
